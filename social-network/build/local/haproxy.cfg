global
    log stdout format raw local0

defaults
    log     global
    mode    tcp
    option  tcplog
    timeout connect 3s
    timeout client  30s
    timeout server  30s

frontend write_pg
    bind *:5000
    default_backend pg_master

frontend read_pg
    bind *:5001
    default_backend pg_slaves

backend pg_master
    mode tcp
    server master monolith_db_master:5432 check

backend pg_slaves
    mode tcp
    balance roundrobin
    server slave1 monolith_db_slave1:5432 check inter 1s fall 2 rise 1
    server slave2 monolith_db_slave2:5432 check inter 1s fall 2 rise 1
