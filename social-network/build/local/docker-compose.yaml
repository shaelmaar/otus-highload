networks:
  social-network-shared-net:
    external: true

services:
  nginx:
    build: ./../nginx
    ports:
      - "${MONOLITH_NGINX_PORT}:80"
    expose:
      - "8080"
    volumes:
      - ./../nginx/nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      monolith_app:
        condition: service_started
      dialogs_app:
        condition: service_started
      counters_app:
        condition: service_started
    restart: always
    networks:
      - social-network-shared-net
